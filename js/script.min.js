function populateStorage(){localStorage.setItem("dateIn",dateIn.value),localStorage.setItem("dateOut",dateOut.value)}function initialize(){var e=new google.maps.LatLng(34.8543734,-111.8302437),t="img/htmlacademy.png",a={zoom:8,center:e,scrollwheel:!1,disableDefaultUI:!0},o=new google.maps.Map(document.getElementById("map"),a);new google.maps.Marker({position:e,map:o,icon:t})}var link=document.querySelector(".btn-search"),popup=document.querySelector(".search-form"),map=document.querySelector(".search-map"),close=document.querySelector(".modal-content-close"),dateIn=popup.querySelector("[name=date-in]"),dateOut=popup.querySelector("[name=date-out]"),adults=popup.querySelector("[name=adults]"),children=popup.querySelector("[name=children]"),storageDateIn=localStorage.getItem("dateIn"),storageDateOut=localStorage.getItem("dateOut");link.addEventListener("click",function(e){e.preventDefault(),popup.classList.toggle("search-form-show"),storageDateIn?(dateIn.value=storageDateIn,storageDateOut?(dateOut.value=storageDateOut,adults.focus()):dateOut.focus()):dateIn.focus()}),map.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("search-form-show"),popup.classList.remove("modal-error")}),popup.addEventListener("submit",function(e){!dateIn.value||!dateOut.value||adults.value<=0||children.value<=0?(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error")):populateStorage()}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("search-form-show")&&(popup.classList.remove("search-form-show"),popup.classList.remove("modal-error"))}),google.maps.event.addDomListener(window,"load",initialize);
